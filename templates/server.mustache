<div class="my-4" style="border-top-width: 2px;border-top-style: solid;" >
<div class="lg:flex lg:max-w-screen-lg m-auto p-4 justify-between" >
  <div class="lg:mt-0" id="server">
    <h2 class="font-semibold text-lg mb-2">태양광 웹 서버</h2>
    <span>배터리 남은 용량: </span><span id="batteryInfo"></span> <span>%</span><br/>
    <span>배터리 전압: </span><span id="voltage"></span> <span>V</span><br/>
    <span>전기 사용: </span><span id="powerConsumption"></span> <span>Watt</span><br/>
    <span>서버 시간: </span><span id="date"></span><br/>
    <span>가동 시간: </span><span id="uptime"></span><br/>
    <span>날씨(구름량): </span><span id="forecast"></span><br/>
    <span id="address"> 위치: 위도 37.493423, 경도 126.834054</span><br/>
  </div>
  <div class="lg:mt-0">
    <h2 class="font-semibold text-lg mb-1">제로의 예술</h2>
    <a href="https://barimart.wordpress.com" target="_blank"><span>바림</span></a> (광주광역시 동구 대의동 80-2 3층) <br>
    <a href="http://womanopentechlab.kr" target="_blank"><span>여성을 위한 열린 기술랩</span></a> (서울시 중구 을지로 157 대림상가 세운메이커스큐브 대림-동측 306호)
    </br>
    <div>
    <a href="https://nothingmakesitself.art/Satellite-Project"><img class="inline md:hidden mt-4 mb-1 h-16" src="https://freight.cargo.site/t/original/i/abcd0824382cdb1e6c2efca6e3d5ae4dd8fc33f6ed88bddbfa25923073865abf/12313123100.png"></a>
    </br>
    <h2 class="hidden md:block font-semibold text-lg mt-2 mb-1">한국문화예술위원회</h2>
    <span class="">2021 아르코 융복합 예술 페스티벌 《횡단하는 물질의 세계》</span> <br/>
    <span class="">2021 ARKO Art & Tech Festival Nothing Makes Itself</span>
    </div>
  </div>
</div>
</div>
<script>
var xhr = new XMLHttpRequest();
xhr.open('GET', '/server', true);

// If specified, responseType must be empty string or "text"
xhr.responseType = 'text';

xhr.onload = function () {
    if (xhr.readyState === xhr.DONE) {
        if (xhr.status === 200) {
            console.log(xhr.responseText);
            const res = JSON.parse(xhr.responseText);
            console.log(res.battery);
            //document.getElementById('server').innerText = xhr.responseText;
            document.getElementById('batteryInfo').innerText = res.battery.toString();
            document.getElementById('voltage').innerText = res.voltage;
            document.getElementById('powerConsumption').innerText = res.powerConsumption;
            document.getElementById('date').innerText = res.date;
            document.getElementById('uptime').innerText = res.uptime;
            document.getElementById('forecast').innerText = res.forecast;
            var r = document.querySelector(':root');
            r.style.setProperty('--battery', res.battery.toString() + '%');
            document.getElementById('level').innerText = res.battery;
        }
    }
};

xhr.send(null);
</script>
